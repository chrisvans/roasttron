{% extends 'base.html' %}
{% load staticfiles i18n %}

{% block css %}
<link rel="stylesheet" href="{% static 'bower_components/nvd3/build/nv.d3.css/' %}">
{% endblock css %}

{% block content %}
<div ng-app='someController'>
    <div ng-controller="testController">
        <nvd3 options='options' data='data'></nvd3>
    </div>
</div>
{% endblock content %}

{% block javascript %}
<script src="{% static 'bower_components/angular/angular.js/' %}"></script>
<script src="{% static 'bower_components/angular-route/angular-route.js/' %}"></script>
<script src="{% static 'bower_components/angular-resource/angular-resource.js/' %}"></script>
<script src="{% static 'bower_components/angular-cookies/angular-cookies.js/' %}"></script>
<script src="{% static 'bower_components/d3/d3.js/' %}"></script>
<script src="{% static 'bower_components/nvd3/build/nv.d3.js/' %}"></script>
<script src="{% static 'bower_components/angular-nvd3/dist/angular-nvd3.js/' %}"></script>
<script>
angular.module('someController', ['nvd3'])
.controller('testController', ['$scope', function($scope) {
  $scope.data = [{
      key: "Cumulative Return",
      values: [
          { "label" : "A" , "value" : -29.765957771107 },
          { "label" : "B" , "value" : 0 },
          { "label" : "C" , "value" : 32.807804682612 },
          { "label" : "D" , "value" : 196.45946739256 },
          { "label" : "E" , "value" : 0.19434030906893 },
          { "label" : "F" , "value" : -98.079782601442 },
          { "label" : "G" , "value" : -13.925743130903 },
          { "label" : "H" , "value" : -5.1387322875705 }
      ]
  }];
  $scope.options = {
      chart: {
          type: 'discreteBarChart',
          height: 450,
          margin : {
              top: 20,
              right: 20,
              bottom: 60,
              left: 55
          },
          x: function(d){ return d.label; },
          y: function(d){ return d.value; },
          showValues: true,
          valueFormat: function(d){
              return d3.format(',.4f')(d);
          },
          transitionDuration: 500,
          xAxis: {
              axisLabel: 'X Axis'
          },
          yAxis: {
              axisLabel: 'Y Axis',
              axisLabelDistance: 30
          }
      }
  };

  console.log($scope);
}])
</script>
<script src="{% static 'roastTron/app.js/' %}"></script>
{% endblock javascript %}